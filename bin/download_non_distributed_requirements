#!/usr/bin/env bash
# LICENSED INTERNAL CODE. PROPERTY OF IBM.
# IBM Research Zurich Licensed Internal Code
# (C) Copyright IBM Corp. 2020
# ALL RIGHTS RESERVED
NODIST_REQS_PIP=${IBM_CODE_PATH}/nodist_requirements_pip.txt
NODIST_REQS_CONDA=${IBM_CODE_PATH}/nodist_requirements_conda.txt
echo "
The following PyPI packages were not distributed in this container image because of their license:
$(cat ${NODIST_REQS_PIP})
, as well as the following conda packages:
$(cat ${NODIST_REQS_CONDA})

By selecting '1) Install packages' you agree to trigger the download and installation of these packages now.
"

select answer in "Install packages" "Exit";
do
  case $answer in
    'Install packages' )
      echo "Installing packages now..."
      conda run -n base pip install -r ${NODIST_REQS_PIP}
      while read req; do conda install -n base -y $req; done < ${NODIST_REQS_CONDA}
      exit;;
    * ) 
      echo "Not installing packages. Exiting now..."
      exit;;
  esac
done
